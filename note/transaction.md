# 事务
## read phenomenon 读现象
- Dirty read 脏读
  - 事务A读到一个没提交的事务B写入的值。由于没有提交，事务B可能会回滚。
- Non-repeatable read 不可重复度
  - 事务A先读到一个数a，在事务A没结束的时候再去读同一个数，数a变成了b。这个数是被事务B修改并提交。
- Phantom 幻读
  - 事务A查找id为1的记录，发现它不存在，并准备插入id为1的记录。但是在此之前，事务B完成插入id为1的记录，因此，事务A插入失败。此时，事务A先前的查找就像幻影一样，故称为幻读。
- serialization anomaly 序列化异常 （https://wiki.postgresql.org/wiki/SSI）
  - 事务A 将所有白色修改为黑色，但没提交。此时，事务B将黑色修改为白色，并提交。事务再去提交则会出现序列化异常。

## 四个隔离等级
- READ UNCOMMITTED (读未提交)
  - 其他事务没有提交的数据也能读到
- READ COMMITTED （读已提交）
  - 只能读取其他事务提交数据
- REPEATABLE READ （可重复读）
  - 对于一个数据，无论其他事务怎么修改并提交，当前事务永远只读到该数据最初始的版本。
- SERIALIZABLE （可序列化）
  - 保证事务按顺序执行，而不是并发（实际上，数据库会判断，如果一组事务虽然是可序列化等级，但只要不对同一行产生写意图，就允许它们并发执行以此提升数据库的执行效率）

## 